<!DOCTYPE html>
<html>


<body>

<video hidden controls id="test" width="640">
  <source src="media/duck.mp4" type='video/mp4'>
</video>

<p>Not Meant For Public to See. Reload Page to Change FPS.</p>
Play at <input type="number" id="FPS" value="60"> FPS
<button onclick="startVideo(fps)">Play</button>
<button onclick="pause()">Pause</button>
<button onclick="reset()">Reset</button>
<button onclick="mute()">Mute</button>
<button onclick="unmute()">Unmute</button>


<br></br>


<canvas id="window" width="640px" height="480px" style="border:1px solid #d3d3d3;"></canvas>



</body>

<script>
var fps;
var v = document.getElementById("test");
var c = document.getElementById("window");

function getFPS() {
	fps = document.getElementById("FPS").value;
}

function pause() {
	document.getElementById("test").pause();
}

function mute() {
	document.getElementById("test").volume = 0;
}

function unmute() {
	document.getElementById("test").volume = 0.5;
}


function reset() {
	pause();
	document.getElementById("test").currentTime = 0;
	startVideo();
}

function drawFrame() {
	var ctx = c.getContext("2d");
	ctx.drawImage(v,5,5,c.width-10,c.height-10);
}

function startVideo() {
getFPS();

var ctx = c.getContext("2d");
var time = 1000 / fps;
var i;

document.getElementById("test").play();
v.addEventListener("play", function() {i = window.setInterval(drawFrame,time);}, true);
v.addEventListener("pause", function() {window.clearInterval(i);}, true);
v.addEventListener("ended", function() {clearInterval(i);}, true); 
}

</script>

</html>
